---
import Primary from '@/layouts/Primary.astro';
import type {Skill, Education, ProfessionalExperience} from '@/lib/types';
import resumeData from '@/content/resume.json';
import Badge from '@/components/Badge.astro';
import Accordion from '@/components/accordion/Accordion.astro';
import AccordionItem from '@/components/accordion/AccordionItem.astro';

const skills: Skill[] = resumeData.skills;
const education: Education[] = resumeData.education;
const experience: ProfessionalExperience[] = resumeData.experience;
---

<Primary title='Resume'>
	<div class='m-4'>
		<h4 class='text-4xl underline'>Skills</h4>
		<div class='mb-4 space-x-1 space-y-2'>
			{
				skills.map((skill) => {
					let skill_class = '';
					switch (skill.years) {
						case 1:
							skill_class = 'text-md my-auto';
							break;
						case 2:
							skill_class = 'text-lg my-auto';
							break;
						case 3:
							skill_class = 'text-xl my-auto';
							break;
						case 4:
							skill_class = 'text-2xl my-auto';
							break;
						case 5:
							skill_class = 'text-3xl my-auto';
							break;
						case 6:
							skill_class = 'text-4xl my-auto';
							break;
						default:
							'';
					}

					return <Badge id={skill.name} class={skill_class} text={skill.name} />;
				})
			}
		</div>
	</div>
	<div class='m-4'>
		<h4 class='text-4xl underline'>Experience</h4>
		<Accordion>
			{
				experience.map((exp, index) => (
					<AccordionItem title={`${exp.position} - ${exp.name}`}>
						<div class='mb-6 px-6'>
							<p hidden={!exp.location}>Company Location: {exp.location}</p>
							<p hidden={!exp.timeEmployed}>Employed from {exp.timeEmployed}</p>
							<br />
							<h5 class='text-xl underline'>Responsibilities:</h5>
							<ul class='list-disc'>
								{exp.responsibilities.map((responsibility) => (
									<li>{responsibility}</li>
								))}
							</ul>
						</div>
					</AccordionItem>
				))
			}
		</Accordion>
	</div>
	<div class='m-4'>
		<h4 class='text-4xl underline'>Education</h4>
		<Accordion>
			{
				education.map((edu) => {
					return (
						<AccordionItem title={`${edu.name} - ${edu.graduationDate}`}>
							<div class='mb-6 px-6 pt-0 pb-4'>
								<h6 class='text-xl underline'>Field of Study:</h6>
								<p>
									{edu.degree?.join(', ') +
										(edu.degreeAddendum ? ` (${edu.degreeAddendum})` : '')}
								</p>
								<p hidden={!edu.gpa}>
									<strong>Unweighted GPA: </strong>
									{edu.gpa?.unweighted},<strong> Weighted GPA: </strong>
									{edu.gpa?.weighted}
								</p>
								<br />
								<h6 class='text-xl underline'>Relevant Courses</h6>
								<ul class='list-disc'>
									{edu.relCoursework.map((course) => (
										<li>{course}</li>
									))}
								</ul>
								<div hidden={!edu.propCoursework}>
									<h6 class='text-xl underline'>Proposed Courses</h6>
									<ul class='list-disc'>
										{edu.propCoursework?.map((course) => (
											<li>{course}</li>
										))}
									</ul>
								</div>
							</div>
						</AccordionItem>
					);
				})
			}
		</Accordion>
	</div>
</Primary>
